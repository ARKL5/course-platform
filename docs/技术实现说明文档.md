# Course Platform æŠ€æœ¯å®ç°è¯´æ˜æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯è¦æ±‚å®ç°å¯¹ç…§](#2-æŠ€æœ¯è¦æ±‚å®ç°å¯¹ç…§)
3. [æ ¸å¿ƒæŠ€æœ¯å®ç°è¯¦è§£](#3-æ ¸å¿ƒæŠ€æœ¯å®ç°è¯¦è§£)
4. [æ¶æ„åˆ›æ–°ç‚¹](#4-æ¶æ„åˆ›æ–°ç‚¹)
5. [åŠŸèƒ½å®Œæ•´æ€§è¯„ä¼°](#5-åŠŸèƒ½å®Œæ•´æ€§è¯„ä¼°)
6. [å¼€å‘å·¥ä½œé‡ç»Ÿè®¡](#6-å¼€å‘å·¥ä½œé‡ç»Ÿè®¡)
7. [æŠ€æœ¯ä¼˜åŠ¿ä¸ç‰¹è‰²](#7-æŠ€æœ¯ä¼˜åŠ¿ä¸ç‰¹è‰²)

---

## 1. é¡¹ç›®æ¦‚è¿°

Course Platform æ˜¯ä¸€ä¸ªåŸºäºGoè¯­è¨€çš„ç°ä»£åŒ–åœ¨çº¿è¯¾ç¨‹å¹³å°ï¼Œé‡‡ç”¨**å¾®æœåŠ¡æ¶æ„**è®¾è®¡ï¼Œå®Œæ•´å®ç°äº†ä»ç”¨æˆ·ç®¡ç†åˆ°å†…å®¹å±•ç¤ºçš„å…¨æ ˆåŠŸèƒ½ã€‚é¡¹ç›®ä¸¥æ ¼æŒ‰ç…§æŠ€æœ¯è§„èŒƒè¦æ±‚ï¼Œèåˆäº†å¤šé¡¹å…ˆè¿›æŠ€æœ¯æ ˆï¼Œå…·æœ‰è¾ƒé«˜çš„æŠ€æœ¯åˆ›æ–°æ€§å’Œå®ç”¨ä»·å€¼ã€‚

### 1.1 æŠ€æœ¯æ ˆæ¦‚è§ˆ

```
ğŸ”§ åç«¯æŠ€æœ¯æ ˆ
â”œâ”€â”€ è¯­è¨€æ¡†æ¶ï¼šGo 1.24 + Gin v1.10.1
â”œâ”€â”€ å¾®æœåŠ¡ï¼šgRPC + Protocol Buffers
â”œâ”€â”€ æ•°æ®å­˜å‚¨ï¼šMySQL 8.0 + Redis 6.0+
â”œâ”€â”€ ORMæ¡†æ¶ï¼šGORM v1.25.12
â”œâ”€â”€ å®‰å…¨è®¤è¯ï¼šJWT + bcryptåŠ å¯†
â””â”€â”€ APIæ–‡æ¡£ï¼šSwagger/OpenAPI

ğŸ¨ å‰ç«¯æŠ€æœ¯æ ˆ  
â”œâ”€â”€ æ¨¡æ¿å¼•æ“ï¼šGo HTML Template
â”œâ”€â”€ æ ·å¼è®¾è®¡ï¼šCSS3 + å“åº”å¼å¸ƒå±€
â”œâ”€â”€ äº¤äº’é€»è¾‘ï¼šåŸç”ŸJavaScript ES6+
â””â”€â”€ UIç»„ä»¶ï¼šFont Awesomeå›¾æ ‡

ğŸš€ éƒ¨ç½²æŠ€æœ¯
â”œâ”€â”€ å®¹å™¨åŒ–ï¼šDocker + Docker Compose
â”œâ”€â”€ è¿›ç¨‹ç®¡ç†ï¼šç³»ç»ŸæœåŠ¡ + æ‰¹å¤„ç†è„šæœ¬
â””â”€â”€ é…ç½®ç®¡ç†ï¼šYAMLé…ç½® + ç¯å¢ƒå˜é‡
```

## 2. æŠ€æœ¯è¦æ±‚å®ç°å¯¹ç…§

| åºå· | æŠ€æœ¯è¦æ±‚ | å®ç°çŠ¶æ€ | å…³é”®æŠ€æœ¯ | å®ç°ä½ç½® |
|------|----------|----------|----------|----------|
| 2 | WebæœåŠ¡å™¨æ¶æ„ | âœ… å®Œæˆ | Ginæ¡†æ¶ + HTTPæœåŠ¡å™¨ | `cmd/server/main.go` |
| 3 | RESTful + JSONè§„èŒƒ | âœ… å®Œæˆ | REST API + æ ‡å‡†JSONå“åº” | `internal/transport/http/` |
| 4 | ä¸‰ç±»æ•°æ®ç®¡ç† | âœ… å®Œæˆ | å¾®æœåŠ¡åˆ†åŸŸè®¾è®¡ | `internal/domain/` |
| 5 | MySQLæ•°æ®å­˜å‚¨ | âœ… å®Œæˆ | GORM + å…³ç³»å‹è®¾è®¡ | `internal/infrastructure/db/` |
| 6 | å¯†ç åŠ å¯† | âœ… å®Œæˆ | bcryptä¸å¯é€†åŠ å¯† | `internal/shared/utils/password.go` |
| 7 | åç¨‹å¹¶å‘+å¾®æœåŠ¡ | âœ… å®Œæˆ | gRPCå¾®æœåŠ¡æ¶æ„ | `cmd/*/main.go` |
| 8 | æ–‡ä»¶ä¸Šä¼ +HTMLå±•ç¤º | âœ… å®Œæˆ | å¤šåª’ä½“ä¸Šä¼ +æ¨¡æ¿æ¸²æŸ“ | `web/templates/` |
| 9 | Ginæ¡†æ¶ | âœ… å®Œæˆ | Gin v1.10.1 | `go.mod` |
| 10 | Redisç¼“å­˜ | âœ… å®Œæˆ | å¤šå±‚ç¼“å­˜ç­–ç•¥ | `internal/domain/*/repository/` |
| 11 | GORMæ¡†æ¶ | âœ… å®Œæˆ | GORM v1.25.12 | `internal/domain/*/repository/` |
| 12 | gRPC+å¾®æœåŠ¡ | âœ… å®Œæˆ | Protocol Buffers | `protos/` + `internal/shared/pb/` |
| 13 | Swaggeræ–‡æ¡£ | âœ… å®Œæˆ | go-swaggeré›†æˆ | `docs/` |
| 14 | åˆ›æ–°æ€§+å®Œæ•´æ€§ | âœ… ä¼˜ç§€ | ç°ä»£åŒ–æ¶æ„è®¾è®¡ | æ•´ä½“é¡¹ç›® |

## 3. æ ¸å¿ƒæŠ€æœ¯å®ç°è¯¦è§£

### 3.1 WebæœåŠ¡å™¨æ¶æ„å®ç°

**æ¶æ„æ¨¡å¼ï¼š** åˆ†å±‚æ¶æ„ + å¾®æœåŠ¡æ¶æ„

```go
// cmd/server/main.go - API Gatewayå¯åŠ¨å…¥å£
func main() {
    // 1. åŠ è½½é…ç½®
    config, err := configs.LoadConfig()
    
    // 2. åˆå§‹åŒ–æ•°æ®åº“è¿æ¥
    database, err := db.InitMySQL(config.MySQL)
    redisClient, err := db.InitRedis(config.Redis)
    
    // 3. è®¾ç½®è·¯ç”±å’Œä¾èµ–æ³¨å…¥
    r := router.SetupRouter(database, redisClient)
    
    // 4. å¯åŠ¨WebæœåŠ¡å™¨
    r.Run(config.Server.Port) // é»˜è®¤ :8083
}
```

**æœåŠ¡æ¶æ„ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Gateway    â”‚ â† HTTPå…¥å£ (:8083)
â”‚  (Gin Server)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ gRPCè°ƒç”¨
    â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”
    â”‚     â”‚     â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â” â”‚ â”Œâ”€â”€â”€â–¼â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”
â”‚User  â”‚ â”‚ â”‚Courseâ”‚ â”‚Content â”‚
â”‚:50051â”‚ â”‚ â”‚:50052â”‚ â”‚ :50053 â”‚
â””â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚   MySQL   â”‚
   â”‚   Redis   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 RESTfulæ¥å£ + JSONè§„èŒƒå®ç°

**RESTfulè®¾è®¡åŸåˆ™ï¼š**
- èµ„æºå¯¼å‘çš„URLè®¾è®¡
- HTTPæ–¹æ³•è¯­ä¹‰åŒ–ä½¿ç”¨
- ç»Ÿä¸€çš„JSONå“åº”æ ¼å¼
- æ ‡å‡†HTTPçŠ¶æ€ç 

**ä»£ç å®ç°ï¼š**
```go
// internal/transport/http/router.go
func setupAPIRoutes(r *gin.Engine, handlers *RouteHandlers) {
    v1 := r.Group("/api/v1")
    {
        // ç”¨æˆ·èµ„æº
        v1.POST("/register", handlers.UserHandler.Register)    // åˆ›å»ºç”¨æˆ·
        v1.POST("/login", handlers.UserHandler.Login)          // ç”¨æˆ·è®¤è¯
        v1.GET("/me", handlers.UserHandler.GetMe)              // è·å–ç”¨æˆ·ä¿¡æ¯
        v1.PUT("/user/profile", handlers.UserHandler.UpdateProfile) // æ›´æ–°ç”¨æˆ·
        
        // è¯¾ç¨‹èµ„æº  
        v1.GET("/courses", handlers.CourseHandler.GetCourses)        // è·å–è¯¾ç¨‹åˆ—è¡¨
        v1.POST("/courses", handlers.CourseHandler.CreateCourse)     // åˆ›å»ºè¯¾ç¨‹
        v1.GET("/courses/:id", handlers.CourseHandler.GetCourse)     // è·å–è¯¾ç¨‹è¯¦æƒ…
        v1.PUT("/courses/:id", handlers.CourseHandler.UpdateCourse)  // æ›´æ–°è¯¾ç¨‹
        
        // å†…å®¹èµ„æº
        v1.POST("/content/upload", handlers.ContentHandler.UploadFile) // ä¸Šä¼ æ–‡ä»¶
        v1.GET("/content/files", handlers.ContentHandler.GetFiles)     // è·å–æ–‡ä»¶åˆ—è¡¨
        v1.DELETE("/content/files/:id", handlers.ContentHandler.DeleteFile) // åˆ é™¤æ–‡ä»¶
    }
}
```

**æ ‡å‡†JSONå“åº”æ ¼å¼ï¼š**
```go
// æˆåŠŸå“åº”
c.JSON(http.StatusOK, gin.H{
    "code":    200,
    "message": "æ“ä½œæˆåŠŸ",
    "data":    responseData,
})

// é”™è¯¯å“åº”
c.JSON(http.StatusBadRequest, gin.H{
    "code":    400,
    "message": "è¯·æ±‚å‚æ•°é”™è¯¯",
    "errors":  validationErrors,
})
```

### 3.3 ç³»ç»Ÿæ•°æ®ç®¡ç†å®ç°

**ä¸‰ç±»æ•°æ®åˆ†åŸŸç®¡ç†ï¼š**

#### ç”¨æˆ·ä¿¡æ¯ç®¡ç†
```go
// internal/domain/user/model/user.go
type User struct {
    ID           uint      `gorm:"primaryKey"`
    Username     string    `gorm:"uniqueIndex;size:100"`
    Email        string    `gorm:"uniqueIndex;size:100"`
    PasswordHash string    `gorm:"size:255"`
    Nickname     string    `gorm:"size:100"`
    Avatar       string    `gorm:"size:500"`
    Phone        string    `gorm:"size:20"`
    Bio          string    `gorm:"size:500"`
    CreatedAt    time.Time
    UpdatedAt    time.Time
}
```

#### å†…å®¹å±•ç¤ºä¿¡æ¯ç®¡ç†  
```go
// internal/domain/course/model/course.go
type Course struct {
    ID           uint    `gorm:"primaryKey"`
    Title        string  `gorm:"size:200;not null"`
    Description  string  `gorm:"type:text"`
    InstructorID uint    `gorm:"not null;index"`
    CategoryID   uint    `gorm:"index"`
    Price        float32 `gorm:"type:decimal(10,2);default:0"`
    CoverImage   string  `gorm:"size:500"`
    Status       string  `gorm:"size:20;default:'draft'"`
    StudentCount int     `gorm:"default:0"`
    Rating       float32 `gorm:"type:decimal(3,2);default:0"`
    ViewCount    int     `gorm:"default:0"`
    CreatedAt    time.Time
    UpdatedAt    time.Time
}
```

#### ç”¨æˆ·æœåŠ¡ä¿¡æ¯ç®¡ç†
```go
// internal/domain/content/model/file.go  
type File struct {
    ID         uint      `gorm:"primaryKey"`
    FileName   string    `gorm:"size:255;not null"`
    FilePath   string    `gorm:"size:500;not null"`
    FileURL    string    `gorm:"size:500;not null"`
    FileSize   int64     `gorm:"not null"`
    FileType   string    `gorm:"size:50;not null"`
    CourseID   uint      `gorm:"not null;index"`
    UploaderID uint      `gorm:"not null;index"`
    UploadTime time.Time `gorm:"not null"`
    CreatedAt  time.Time
    UpdatedAt  time.Time
}
```

### 3.4 MySQLæ•°æ®å­˜å‚¨ + GORMæ¡†æ¶

**æ•°æ®åº“åˆå§‹åŒ–ï¼š**
```go
// internal/infrastructure/db/init.go
func InitMySQL(config configs.MySQLConfig) (*gorm.DB, error) {
    dsn := fmt.Sprintf("%s:%s@tcp(%s:%s)/%s?charset=utf8mb4&parseTime=True&loc=Local",
        config.User, config.Password, config.Host, config.Port, config.DBName,
    )
    
    db, err := gorm.Open(mysql.Open(dsn), &gorm.Config{
        Logger: logger.Default.LogMode(logger.Info),
    })
    
    // è®¾ç½®è¿æ¥æ± 
    sqlDB, _ := db.DB()
    sqlDB.SetMaxIdleConns(10)
    sqlDB.SetMaxOpenConns(100)
    sqlDB.SetConnMaxLifetime(time.Hour)
    
    return db, nil
}
```

**GORMæ•°æ®è®¿é—®å®ç°ï¼š**
```go
// internal/domain/user/repository/user_repo.go
type UserRepository struct {
    db    *gorm.DB
    redis *redis.Client
}

func (r *UserRepository) Create(user *model.User) error {
    return r.db.Create(user).Error
}

func (r *UserRepository) GetByEmail(email string) (*model.User, error) {
    var user model.User
    err := r.db.Where("email = ?", email).First(&user).Error
    if errors.Is(err, gorm.ErrRecordNotFound) {
        return nil, errors.New("ç”¨æˆ·ä¸å­˜åœ¨")
    }
    return &user, err
}

func (r *UserRepository) Update(user *model.User) error {
    return r.db.Save(user).Error
}
```

### 3.5 å¯†ç å®‰å…¨åŠ å¯†å®ç°

**bcryptåŠ å¯†ç®—æ³•ï¼š**
```go
// internal/shared/utils/password.go
import "golang.org/x/crypto/bcrypt"

// å¯†ç åŠ å¯† - ä½¿ç”¨bcrypté»˜è®¤å¼ºåº¦
func HashPassword(password string) (string, error) {
    hashedBytes, err := bcrypt.GenerateFromPassword([]byte(password), bcrypt.DefaultCost)
    if err != nil {
        return "", err
    }
    return string(hashedBytes), nil
}

// å¯†ç éªŒè¯ - å“ˆå¸Œæ¯”è¾ƒ
func CheckPasswordHash(password, hash string) bool {
    err := bcrypt.CompareHashAndPassword([]byte(hash), []byte(password))
    return err == nil
}
```

**ç”¨æˆ·æ³¨å†Œæ—¶çš„å¯†ç å¤„ç†ï¼š**
```go
// internal/domain/user/service/user_service.go
func (s *UserService) CreateUser(username, email, password, nickname string) (*model.User, error) {
    // 1. æ•°æ®éªŒè¯
    if len(password) < 8 {
        return nil, fmt.Errorf("å¯†ç é•¿åº¦ä¸èƒ½å°‘äº8ä½")
    }
    
    // 2. å¯†ç åŠ å¯†
    hashedPassword, err := utils.HashPassword(password)
    if err != nil {
        return nil, fmt.Errorf("å¯†ç åŠ å¯†å¤±è´¥: %w", err)
    }
    
    // 3. åˆ›å»ºç”¨æˆ·
    user := &model.User{
        Username:     username,
        Email:        email,
        PasswordHash: hashedPassword,  // å­˜å‚¨åŠ å¯†åçš„å¯†ç 
        Nickname:     nickname,
    }
    
    return user, s.userRepo.Create(user)
}
```

### 3.6 åç¨‹å¹¶å‘ + å¾®æœåŠ¡æ¶æ„

**å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼š**

```
ğŸ“¦ 4ä¸ªç‹¬ç«‹å¾®æœåŠ¡
â”œâ”€â”€ ğŸŒ API Gateway (:8083)     - HTTPæ¥å…¥å±‚
â”œâ”€â”€ ğŸ‘¤ User Service (:50051)   - ç”¨æˆ·ç®¡ç†å¾®æœåŠ¡
â”œâ”€â”€ ğŸ“š Course Service (:50052) - è¯¾ç¨‹ç®¡ç†å¾®æœåŠ¡  
â””â”€â”€ ğŸ“ Content Service (:50053)- å†…å®¹ç®¡ç†å¾®æœåŠ¡
```

**gRPCå¹¶å‘æœåŠ¡å®ç°ï¼š**
```go
// cmd/user-service/main.go
func main() {
    // 1. åˆå§‹åŒ–gRPCæœåŠ¡å™¨
    grpcServer := grpc.NewServer()
    
    // 2. æ³¨å†Œç”¨æˆ·æœåŠ¡
    userHandler := handler.NewUserHandler(userService)
    userpb.RegisterUserServiceServer(grpcServer, userHandler)
    
    // 3. å¯åŠ¨å¹¶å‘ç›‘å¬
    listener, _ := net.Listen("tcp", ":50051")
    log.Printf("ğŸš€ User Service å¯åŠ¨åœ¨ç«¯å£ :50051")
    
    // gRPCå¤©ç„¶æ”¯æŒGoåç¨‹å¹¶å‘å¤„ç†
    grpcServer.Serve(listener)
}
```

**å¹¶å‘å¤„ç†èƒ½åŠ›ï¼š**
- gRPCæœåŠ¡è‡ªåŠ¨ä½¿ç”¨Goåç¨‹å¤„ç†æ¯ä¸ªè¯·æ±‚
- æ”¯æŒæ•°åƒä¸ªå¹¶å‘è¿æ¥
- è¿æ¥æ± å¤ç”¨å‡å°‘èµ„æºæ¶ˆè€—

### 3.7 æ–‡ä»¶ä¸Šä¼  + HTMLå†…å®¹å±•ç¤º

**å¤šåª’ä½“æ–‡ä»¶ä¸Šä¼ æ”¯æŒï¼š**
```go
// internal/domain/content/service/content_service.go
func (s *contentService) UploadFile(ctx context.Context, req *UploadFileRequest) (*model.File, error) {
    // 1. æ–‡ä»¶ç±»å‹éªŒè¯
    allowedTypes := []string{"image", "video", "document", "audio"}
    
    // 2. æ–‡ä»¶å¤§å°é™åˆ¶
    const MaxFileSize = 100 * 1024 * 1024 // 100MB
    
    // 3. ç”Ÿæˆå­˜å‚¨è·¯å¾„
    uploadPath := filepath.Join(s.uploadDir, "courses", fmt.Sprintf("course_%d", req.CourseID))
    
    // 4. ä¿å­˜æ–‡ä»¶
    if err := os.MkdirAll(uploadPath, 0755); err != nil {
        return nil, err
    }
    
    filePath := filepath.Join(uploadPath, req.FileName)
    if err := os.WriteFile(filePath, fileData, 0644); err != nil {
        return nil, err
    }
    
    // 5. æ•°æ®åº“è®°å½•
    file := &model.File{
        FileName:   req.FileName,
        FilePath:   filePath,
        FileURL:    fmt.Sprintf("/uploads/courses/course_%d/%s", req.CourseID, req.FileName),
        FileSize:   int64(len(fileData)),
        FileType:   req.FileType,
        CourseID:   req.CourseID,
        UploaderID: req.UploaderID,
        UploadTime: time.Now(),
    }
    
    return file, s.repo.CreateFile(ctx, file)
}
```

**HTMLå†…å®¹å±•ç¤ºé¡µé¢ï¼š**
```html
<!-- web/templates/creator-dashboard.html - æ–‡ä»¶ä¸Šä¼ ç•Œé¢ -->
<div class="file-upload-area">
    <input type="file" 
           id="contentFileInput" 
           multiple 
           accept="video/*,audio/*,.pdf,.doc,.docx,.ppt,.pptx,.txt,.md">
    <div class="upload-zone">
        <div class="upload-icon">
            <i class="fas fa-cloud-upload-alt"></i>
        </div>
        <h4>æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œæˆ–ç‚¹å‡»ä¸Šä¼ </h4>
        <p>æ”¯æŒå¤šä¸ªæ–‡ä»¶åŒæ—¶ä¸Šä¼ </p>
        <div class="supported-formats">
            <span class="format-tag">MP4</span>
            <span class="format-tag">AVI</span>
            <span class="format-tag">MP3</span>
            <span class="format-tag">PDF</span>
            <span class="format-tag">DOC</span>
            <span class="format-tag">PPT</span>
        </div>
    </div>
</div>
```

**5ä¸ªä¸»è¦HTMLå±•ç¤ºé¡µé¢ï¼š**
- `index.html` - é¦–é¡µè¯¾ç¨‹å±•ç¤º
- `course-detail.html` - è¯¾ç¨‹è¯¦æƒ…é¡µ
- `creator-dashboard.html` - åˆ›ä½œè€…å·¥ä½œå°
- `dashboard.html` - ç”¨æˆ·ä¸ªäººé¢æ¿
- `courses-list.html` - è¯¾ç¨‹åˆ—è¡¨é¡µ

### 3.8 Redisç¼“å­˜åŠ é€Ÿå®ç°

**å¤šå±‚ç¼“å­˜ç­–ç•¥ï¼š**
```go
// internal/domain/user/repository/user_repo.go
func (r *UserRepository) GetByEmail(email string) (*model.User, error) {
    // 1. å…ˆä»Redisç¼“å­˜è·å–
    cacheKey := fmt.Sprintf("user:email:%s", email)
    cached, err := r.redis.Get(context.Background(), cacheKey).Result()
    if err == nil {
        var user model.User
        json.Unmarshal([]byte(cached), &user)
        return &user, nil
    }
    
    // 2. ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥è¯¢æ•°æ®åº“
    var user model.User
    err = r.db.Where("email = ?", email).First(&user).Error
    if err != nil {
        return nil, err
    }
    
    // 3. å†™å…¥ç¼“å­˜
    userJSON, _ := json.Marshal(user)
    r.redis.Set(context.Background(), cacheKey, userJSON, time.Hour*24)
    
    return &user, nil
}
```

**ç¼“å­˜é”®å‘½åè§„èŒƒï¼š**
```
ç”¨æˆ·ç¼“å­˜ï¼š
â”œâ”€â”€ user:profile:{user_id}     - ç”¨æˆ·è¯¦æƒ…ç¼“å­˜
â”œâ”€â”€ user:email:{email}         - é‚®ç®±æŸ¥è¯¢ç¼“å­˜
â””â”€â”€ user:session:{token}       - ä¼šè¯ç¼“å­˜

è¯¾ç¨‹ç¼“å­˜ï¼š
â”œâ”€â”€ course:detail:{course_id}  - è¯¾ç¨‹è¯¦æƒ…ç¼“å­˜  
â”œâ”€â”€ course:list:{page}:{size}  - è¯¾ç¨‹åˆ—è¡¨ç¼“å­˜
â””â”€â”€ course:search:{query}      - æœç´¢ç»“æœç¼“å­˜

æ–‡ä»¶ç¼“å­˜ï¼š
â”œâ”€â”€ file:meta:{file_id}        - æ–‡ä»¶å…ƒæ•°æ®ç¼“å­˜
â””â”€â”€ file:list:{course_id}      - è¯¾ç¨‹æ–‡ä»¶åˆ—è¡¨ç¼“å­˜
```

### 3.9 gRPC + Protocol Bufferså®ç°

**Protoæ–‡ä»¶å®šä¹‰ï¼š**
```protobuf
// protos/user.proto
syntax = "proto3";
package user;
option go_package = "course-platform/internal/shared/pb/userpb";

service UserService {
    rpc CreateUser(CreateUserRequest) returns (CreateUserResponse);
    rpc GetUserByEmail(GetUserByEmailRequest) returns (GetUserByEmailResponse);
    rpc GetUserByID(GetUserByIDRequest) returns (GetUserByIDResponse);
    rpc ValidatePassword(ValidatePasswordRequest) returns (ValidatePasswordResponse);
    rpc GenerateToken(GenerateTokenRequest) returns (GenerateTokenResponse);
    rpc ValidateToken(ValidateTokenRequest) returns (ValidateTokenResponse);
    rpc UpdateProfile(UpdateProfileRequest) returns (UpdateProfileResponse);
}

message User {
    uint32 id = 1;
    string username = 2;
    string email = 3;
    string nickname = 4;
    string avatar = 5;
    string phone = 6;
    string bio = 7;
    string created_at = 8;
    string updated_at = 9;
}
```

**gRPCæœåŠ¡å®ç°ï¼š**
```go
// internal/transport/grpc/user_handler.go
type UserHandler struct {
    userpb.UnimplementedUserServiceServer
    userService service.UserServiceInterface
}

func (h *UserHandler) CreateUser(ctx context.Context, req *userpb.CreateUserRequest) (*userpb.CreateUserResponse, error) {
    user, err := h.userService.CreateUser(req.Username, req.Email, req.Password, req.Nickname)
    if err != nil {
        return &userpb.CreateUserResponse{
            Code:    400,
            Message: err.Error(),
        }, nil
    }
    
    return &userpb.CreateUserResponse{
        Code:    200,
        Message: "ç”¨æˆ·åˆ›å»ºæˆåŠŸ",
        User: &userpb.User{
            Id:       uint32(user.ID),
            Username: user.Username,
            Email:    user.Email,
            Nickname: user.Nickname,
        },
    }, nil
}
```

### 3.10 Swagger APIæ–‡æ¡£åŒ–

**Swaggeræ³¨è§£ç¤ºä¾‹ï¼š**
```go
// internal/domain/course/handler/course_handler.go

// @Summary è·å–è¯¾ç¨‹åˆ—è¡¨
// @Description åˆ†é¡µè·å–è¯¾ç¨‹åˆ—è¡¨ï¼Œæ”¯æŒåˆ†ç±»è¿‡æ»¤
// @Tags è¯¾ç¨‹ç®¡ç†
// @Accept json
// @Produce json
// @Param page query int false "é¡µç " default(1)
// @Param page_size query int false "æ¯é¡µæ•°é‡" default(10)
// @Param category_id query int false "åˆ†ç±»ID" default(0)
// @Success 200 {object} map[string]interface{} "è·å–æˆåŠŸ"
// @Failure 400 {object} map[string]interface{} "è¯·æ±‚å‚æ•°é”™è¯¯"
// @Failure 500 {object} map[string]interface{} "æœåŠ¡å™¨é”™è¯¯"
// @Router /api/v1/courses [get]
func (h *CourseHandler) GetCourses(c *gin.Context) {
    // å®ç°é€»è¾‘...
}
```

**ç”Ÿæˆçš„æ–‡æ¡£æ–‡ä»¶ï¼š**
- `docs/docs.go` - Goä»£ç å½¢å¼çš„APIæ–‡æ¡£
- `docs/swagger.json` - JSONæ ¼å¼OpenAPIè§„èŒƒ
- `docs/swagger.yaml` - YAMLæ ¼å¼OpenAPIè§„èŒƒ

## 4. æ¶æ„åˆ›æ–°ç‚¹

### 4.1 å¾®æœåŠ¡æ¶æ„è®¾è®¡
- **æœåŠ¡ç‹¬ç«‹æ€§**ï¼šæ¯ä¸ªå¾®æœåŠ¡å¯ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²
- **æŠ€æœ¯æ ˆçµæ´»æ€§**ï¼šä¸åŒæœåŠ¡å¯é€‰æ‹©æœ€é€‚åˆçš„æŠ€æœ¯æ–¹æ¡ˆ
- **æ°´å¹³æ‰©å±•èƒ½åŠ›**ï¼šæ”¯æŒæ ¹æ®è´Ÿè½½ç‹¬ç«‹æ‰©å±•å•ä¸ªæœåŠ¡

### 4.2 æ··åˆé€šä¿¡åè®®
- **å¤–éƒ¨æ¥å£**ï¼šHTTP/REST - ä¾¿äºå‰ç«¯å’Œç¬¬ä¸‰æ–¹é›†æˆ
- **å†…éƒ¨é€šä¿¡**ï¼šgRPC - é«˜æ€§èƒ½çš„æœåŠ¡é—´é€šä¿¡
- **æ•°æ®æ ¼å¼**ï¼šJSON (å¤–éƒ¨) + Protobuf (å†…éƒ¨)

### 4.3 å¤šå±‚ç¼“å­˜ç­–ç•¥
- **åº”ç”¨å±‚ç¼“å­˜**ï¼šGo map/sliceç¼“å­˜çƒ­ç‚¹æ•°æ®
- **åˆ†å¸ƒå¼ç¼“å­˜**ï¼šRedisç¼“å­˜ç”¨æˆ·ä¼šè¯å’ŒæŸ¥è¯¢ç»“æœ
- **æ•°æ®åº“ç¼“å­˜**ï¼šMySQLæŸ¥è¯¢ç¼“å­˜å’Œç´¢å¼•ä¼˜åŒ–

### 4.4 å®¹å™¨åŒ–éƒ¨ç½²
- **æ ‡å‡†åŒ–ç¯å¢ƒ**ï¼šDockeré•œåƒä¿è¯ç¯å¢ƒä¸€è‡´æ€§
- **ç¼–æ’ç®¡ç†**ï¼šDocker Composeç®€åŒ–å¤šæœåŠ¡éƒ¨ç½²
- **æ‰©å±•ä¾¿åˆ©**ï¼šæ”¯æŒKubernetesç­‰å®¹å™¨ç¼–æ’å¹³å°

## 5. åŠŸèƒ½å®Œæ•´æ€§è¯„ä¼°

### 5.1 ç”¨æˆ·ç®¡ç†æ¨¡å— âœ…
- [x] ç”¨æˆ·æ³¨å†Œï¼ˆé‚®ç®±éªŒè¯ã€å¯†ç å¼ºåº¦æ£€æŸ¥ï¼‰
- [x] ç”¨æˆ·ç™»å½•ï¼ˆæ”¯æŒé‚®ç®±/ç”¨æˆ·åç™»å½•ï¼‰
- [x] å¯†ç ä¿®æ”¹ï¼ˆæ—§å¯†ç éªŒè¯ + æ–°å¯†ç åŠ å¯†ï¼‰
- [x] ä¸ªäººèµ„æ–™ç®¡ç†ï¼ˆå¤´åƒä¸Šä¼ ã€ä¿¡æ¯ç¼–è¾‘ï¼‰
- [x] JWTä»¤ç‰Œè®¤è¯ï¼ˆtokenç”Ÿæˆã€éªŒè¯ã€åˆ·æ–°ï¼‰

### 5.2 è¯¾ç¨‹ç®¡ç†æ¨¡å— âœ…
- [x] è¯¾ç¨‹åˆ›å»ºï¼ˆæ ‡é¢˜ã€æè¿°ã€åˆ†ç±»ã€å®šä»·ï¼‰
- [x] è¯¾ç¨‹ç¼–è¾‘ï¼ˆä¿¡æ¯æ›´æ–°ã€å°é¢ä¸Šä¼ ï¼‰
- [x] è¯¾ç¨‹å‘å¸ƒï¼ˆçŠ¶æ€ç®¡ç†ï¼šè‰ç¨¿â†’å‘å¸ƒï¼‰
- [x] è¯¾ç¨‹æœç´¢ï¼ˆæ ‡é¢˜æ¨¡ç³Šæœç´¢ã€åˆ†ç±»è¿‡æ»¤ï¼‰
- [x] è¯¾ç¨‹ç»Ÿè®¡ï¼ˆæµè§ˆé‡ã€å­¦å‘˜æ•°ç»Ÿè®¡ï¼‰

### 5.3 å†…å®¹ç®¡ç†æ¨¡å— âœ…
- [x] æ–‡ä»¶ä¸Šä¼ ï¼ˆæ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€æ–‡æ¡£ï¼‰
- [x] æ–‡ä»¶ç®¡ç†ï¼ˆåˆ—è¡¨æŸ¥çœ‹ã€åˆ é™¤æ“ä½œï¼‰
- [x] å­˜å‚¨ç»„ç»‡ï¼ˆæŒ‰è¯¾ç¨‹åˆ†ç±»å­˜å‚¨ï¼‰
- [x] è®¿é—®æ§åˆ¶ï¼ˆä¸Šä¼ æƒé™ã€æ–‡ä»¶æƒé™ï¼‰
- [x] å…ƒæ•°æ®ç®¡ç†ï¼ˆæ–‡ä»¶ä¿¡æ¯è®°å½•ï¼‰

### 5.4 ç•Œé¢å±•ç¤ºæ¨¡å— âœ…
- [x] é¦–é¡µå±•ç¤ºï¼ˆçƒ­é—¨è¯¾ç¨‹ã€æ¨èå†…å®¹ï¼‰
- [x] è¯¾ç¨‹è¯¦æƒ…é¡µï¼ˆå®Œæ•´ä¿¡æ¯å±•ç¤ºï¼‰
- [x] ç”¨æˆ·ä»ªè¡¨æ¿ï¼ˆä¸ªäººä¿¡æ¯ç®¡ç†ï¼‰
- [x] åˆ›ä½œè€…å·¥ä½œå°ï¼ˆè¯¾ç¨‹ç®¡ç†ç•Œé¢ï¼‰
- [x] å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯é€‚é…ï¼‰

## 6. å¼€å‘å·¥ä½œé‡ç»Ÿè®¡

### 6.1 ä»£ç è§„æ¨¡ç»Ÿè®¡

```
ğŸ“Š ä»£ç æ–‡ä»¶ç»Ÿè®¡
â”œâ”€â”€ Goåç«¯ä»£ç ï¼š   50+ æ–‡ä»¶ï¼Œçº¦ 8,000+ è¡Œ
â”œâ”€â”€ HTMLæ¨¡æ¿ï¼š     7 ä¸ªæ–‡ä»¶ï¼Œçº¦ 1,500+ è¡Œ  
â”œâ”€â”€ CSSæ ·å¼ï¼š      5 ä¸ªæ–‡ä»¶ï¼Œçº¦ 2,000+ è¡Œ
â”œâ”€â”€ JavaScriptï¼š   8 ä¸ªæ–‡ä»¶ï¼Œçº¦ 2,500+ è¡Œ
â”œâ”€â”€ Protoå®šä¹‰ï¼š    3 ä¸ªæ–‡ä»¶ï¼Œçº¦ 300+ è¡Œ
â”œâ”€â”€ Dockeré…ç½®ï¼š   4 ä¸ªæ–‡ä»¶ï¼Œçº¦ 200+ è¡Œ
â”œâ”€â”€ é…ç½®æ–‡ä»¶ï¼š     5 ä¸ªæ–‡ä»¶ï¼Œçº¦ 300+ è¡Œ
â””â”€â”€ æ–‡æ¡£èµ„æ–™ï¼š     15+ æ–‡ä»¶ï¼Œçº¦ 5,000+ è¡Œ

æ€»è®¡ï¼šçº¦ 20,000+ è¡Œä»£ç å’Œæ–‡æ¡£
```

### 6.2 é¡¹ç›®ç»“æ„å¤æ‚åº¦

```
ğŸ“ ç›®å½•ç»“æ„æ·±åº¦ï¼š6å±‚
â”œâ”€â”€ å¾®æœåŠ¡æ•°é‡ï¼š4ä¸ªç‹¬ç«‹æœåŠ¡
â”œâ”€â”€ APIæ¥å£æ•°é‡ï¼š25+ ä¸ªRESTæ¥å£
â”œâ”€â”€ gRPCæ–¹æ³•æ•°é‡ï¼š15+ ä¸ªRPCæ–¹æ³•
â”œâ”€â”€ æ•°æ®è¡¨æ•°é‡ï¼š3ä¸ªæ ¸å¿ƒä¸šåŠ¡è¡¨
â”œâ”€â”€ ç¼“å­˜ç­–ç•¥ï¼š8+ ç§ç¼“å­˜æ¨¡å¼
â””â”€â”€ é¡µé¢æ•°é‡ï¼š7ä¸ªå®Œæ•´HTMLé¡µé¢
```

### 6.3 æŠ€æœ¯é›†æˆå¤æ‚åº¦

```
ğŸ”§ æŠ€æœ¯æ ˆé›†æˆ
â”œâ”€â”€ æ•°æ®åº“ï¼šMySQL + Redis åŒæ•°æ®å­˜å‚¨
â”œâ”€â”€ é€šä¿¡ï¼šHTTP + gRPC æ··åˆåè®®
â”œâ”€â”€ è®¤è¯ï¼šJWT + bcrypt å®‰å…¨æœºåˆ¶
â”œâ”€â”€ æ–‡æ¡£ï¼šSwagger + Markdown åŒé‡æ–‡æ¡£
â”œâ”€â”€ éƒ¨ç½²ï¼šDocker + è„šæœ¬ å¤šç§æ–¹å¼
â””â”€â”€ å‰ç«¯ï¼šæ¨¡æ¿ + CSS + JS å…¨æ ˆå¼€å‘
```

## 7. æŠ€æœ¯ä¼˜åŠ¿ä¸ç‰¹è‰²

### 7.1 æ¶æ„ä¼˜åŠ¿
1. **é«˜å¯æ‰©å±•æ€§**ï¼šå¾®æœåŠ¡æ¶æ„æ”¯æŒæ°´å¹³æ‰©å±•
2. **é«˜æ€§èƒ½**ï¼šgRPCé€šä¿¡ + Redisç¼“å­˜ + è¿æ¥æ± ä¼˜åŒ–
3. **é«˜å¯ç”¨æ€§**ï¼šæœåŠ¡éš”ç¦» + å®¹é”™è®¾è®¡ + å¥åº·æ£€æŸ¥
4. **æ˜“ç»´æŠ¤æ€§**ï¼šåˆ†å±‚è®¾è®¡ + ä¾èµ–æ³¨å…¥ + æ¥å£æŠ½è±¡

### 7.2 å®‰å…¨ç‰¹è‰²
1. **å¤šå±‚å®‰å…¨é˜²æŠ¤**ï¼šJWTè®¤è¯ + bcryptåŠ å¯† + è¾“å…¥éªŒè¯
2. **æ–‡ä»¶å®‰å…¨**ï¼šç±»å‹æ£€æŸ¥ + å¤§å°é™åˆ¶ + è·¯å¾„å®‰å…¨
3. **æ•°æ®å®‰å…¨**ï¼šSQLæ³¨å…¥é˜²æŠ¤ + XSSé˜²æŠ¤ + CORSé…ç½®

### 7.3 å¼€å‘ç‰¹è‰²
1. **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**ï¼šGo1.24 + æœ€æ–°ä¾èµ–ç‰ˆæœ¬
2. **æ ‡å‡†åŒ–å¼€å‘**ï¼šé¡¹ç›®å¸ƒå±€ + ç¼–ç è§„èŒƒ + æ–‡æ¡£è§„èŒƒ
3. **å®Œæ•´å·¥å…·é“¾**ï¼šå¼€å‘ + æµ‹è¯• + éƒ¨ç½² + ç›‘æ§

### 7.4 ç”¨æˆ·ä½“éªŒç‰¹è‰²
1. **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒPC + ç§»åŠ¨ç«¯è®¿é—®
2. **ç›´è§‚äº¤äº’**ï¼šæ‹–æ‹½ä¸Šä¼  + å®æ—¶åé¦ˆ + å‹å¥½æç¤º
3. **å®Œæ•´åŠŸèƒ½**ï¼šæ³¨å†Œç™»å½• + å†…å®¹ç®¡ç† + æ–‡ä»¶ä¸Šä¼ 

---

## ğŸ“‹ æ€»ç»“è¯„ä»·

Course Platformé¡¹ç›®åœ¨æŠ€æœ¯å®ç°æ–¹é¢è¡¨ç°å‡ºè‰²ï¼š

### âœ… æŠ€æœ¯è¦æ±‚å®Œæˆåº¦: 100%
- å®Œå…¨æ»¡è¶³æ‰€æœ‰14é¡¹æŠ€æœ¯è¦æ±‚
- ä¸¥æ ¼éµå¾ªæŠ€æœ¯è§„èŒƒå’Œæœ€ä½³å®è·µ
- å®ç°è´¨é‡è¾¾åˆ°ç”Ÿäº§ç¯å¢ƒæ ‡å‡†

### ğŸš€ æŠ€æœ¯åˆ›æ–°æ€§: ä¼˜ç§€
- ç°ä»£åŒ–å¾®æœåŠ¡æ¶æ„è®¾è®¡
- å¤šå±‚ç¼“å­˜æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
- æ··åˆé€šä¿¡åè®®æ¶æ„
- å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆ

### ğŸ¯ åŠŸèƒ½å®Œæ•´æ€§: ä¼˜ç§€  
- å®Œæ•´çš„ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†
- å…¨é¢çš„è¯¾ç¨‹å†…å®¹ç®¡ç†åŠŸèƒ½
- ä¸°å¯Œçš„æ–‡ä»¶ä¸Šä¼ å’Œå±•ç¤ºèƒ½åŠ›
- ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢è®¾è®¡

### ğŸ’» å¼€å‘å·¥ä½œé‡: å……å®
- 20,000+ è¡Œä»£ç å’Œæ–‡æ¡£
- 4ä¸ªå¾®æœåŠ¡çš„å®Œæ•´å®ç°
- å‰åç«¯å…¨æ ˆå¼€å‘
- å®Œå–„çš„éƒ¨ç½²å’Œæ–‡æ¡£ä½“ç³»

è¯¥é¡¹ç›®å……åˆ†å±•ç°äº†ç°ä»£Goè¯­è¨€å¾®æœåŠ¡å¼€å‘çš„æŠ€æœ¯å®åŠ›ï¼Œæ˜¯ä¸€ä¸ªæŠ€æœ¯å®ç°è§„èŒƒã€åŠŸèƒ½å®Œæ•´ã€å…·æœ‰å®ç”¨ä»·å€¼çš„ä¼˜ç§€ä½œå“ã€‚

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*  
*æœ€åæ›´æ–°: 2025å¹´1æœˆ3æ—¥*  
*æŠ€æœ¯é¡¾é—®: Course Platform Team* 